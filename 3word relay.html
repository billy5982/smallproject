<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3글자 쿵쿵따 끝말잇기</title>
</head>
<body>
<div><span id ='order'>1</span>번째 참가자</div>
<div>제시어 : <span id ='word'></span></div>
<input type="text">
<button id = 'btn'>입력</button>


    <script>
        
        const num = Number(prompt('몇명인가요?'));
        if(num>1){
            let word;//제시어
            let newword;//다음 단어
            let count = 1; //틀린 횟수
            const $input = document.querySelector('input');
            const $button = document.getElementById('btn');
            const $word = document.getElementById('word');
            const $order = document.getElementById('order');
            function d(){
                $input.value = '';
                $input.focus();
            }
            function exit(){
                alert('기회를 모두 소진하셨습니다. 탈락자는 '+$order.textContent+'번 입니다.');
                location.reload();
            }
            $button.addEventListener('click',function(){

                if(!word){

                    if(!newword ||newword.length !==3){
                        if(count===4){
                            exit();
                        }else if(count===3){
                            count++;
                            alert('마지막 기회입니다. 신중하게 선택하세요')
                        }else{
                        count++;
                        alert('글자수와 제시어를 다시 확인하세요'+'기회가 '+(4-Number(count))+'번 남았습니다.');
                        }
                    }else if(newword.length === 3){
                        
                        word = newword;
                        $word.textContent = word;
                        if(Number($order.textContent)+1>num){
                            $order.textContent ='1';
                        }else{
                            $order.textContent = Number($order.textContent)+1;
                        }   
                        count = 1;

                    }

                        d();

                    }else{
                        if(word[word.length-1]===newword[0]&&newword.length===3){
                            word = newword;
                            $word.textContent = word;
                            if(Number($order.textContent)+1>num){
                                $order.textContent = '1'
                            }else{
                                $order.textContent = Number($order.textContent)+1
                            }
                            count = 1;
                        }else{
                            if(count===4){
                                exit();
                            }else if(count===3){
                                count++;
                                alert('마지막 기회입니다. 신중하게 선택하세요');
                            }
                            else{
                            count++;
                            alert('글자수와 제시어를 다시 확인하세요' + '기회가 '+(4-Number(count))+'번 남았습니다.');
                            }}

                        d();

                    }
                    
                
            })

            $input.addEventListener('input',function(){
               newword = event.target.value;
               console.log(newword,Boolean(newword),newword.length);
            })


        }else{
            alert('인원수가 부족하여 다시 실행합니다.');
            location.reload();
        }

    </script>
</body>
</html>